<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<!--<meta name="viewport" content="width=device-width, initial-scale=1" >-->
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0;" name="viewport" />
<meta content="yes" name="apple-mobile-web-app-capable" />
<meta content="black" name="apple-mobile-web-app-status-bar-style" />
<meta content="telephone=no,email=no" name="format-detection" />
<meta name="apple-mobile-web-app-title" content="My Testing Angular">


<style>
@media screen and (max-width: 900px){
    body { background: green;}
}
@media screen and (min-width: 901px){
    body { background: red;}
}
</style>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.7.9/angular.min.js"></script>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
</head>
<body>
<div data-ng-app="myApp" data-ng-controller="myController">
    <div class="container">
        <div class="row" data-ng-repeat="datum in data">
            <div class="col-sm-2"><span>{{datum.Name}}</span></div>
            <div class="col-sm-4"><span>{{datum.City}}</span></div>
			<div class="col-sm-4"><span>{{datum.Country}}</span></div>
            <div class="col-sm-2"><button type="button" data-ng-click="editRecord(datum.id)">Edit</button></div>
        </div>
    </div>
    <button type="button" class="btn btn-primary" data-ng-click="InitData()">Get</button>

    <button type="button" class="btn btn-primary" data-ng-click="editRecord(-1)">Create Record</button>

    <form data-ng-submit="mySubmitForm()" data-ng-hide="hideform">
        <div class="form-group row">
            <label for="name" class="col-sm-2 col-form-label">Name</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="name" placeholder="Name" data-ng-model="record.Name" />
            </div>
        </div>
        <div class="form-group row">
            <label for="desc" class="col-sm-2 col-form-label">City</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="desc" placeholder="Description" data-ng-model="record.City" />
            </div>
        </div>
        <div class="form-group row">
            <label for="desc" class="col-sm-2 col-form-label">Country</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="desc" placeholder="Description" data-ng-model="record.Country" />
            </div>
        </div>
        <div class="form-group row">
			<input type="hidden" id="id" data-ng-model="record.Id" />
            <button type="submit" class="btn btn-primary mb-2" data-ng-disabled="error || incomplete">Submit</button>
        </div>
    </form>
</div>

    <script>
		var app = angular.module('myApp', [$http]);

        app.controller("myController", function ($scope, $http) {
			$scope.error = false;
			$scope.incomplete = false;
			$scope.hideform = true;
			$scope.color = "red";
			
			$scope.record = {
				Name: "",
				City: "",
				Country: "",
				Id: -1
			};
			
			$scope.data = [
				//{ id: 1, name: "A", description: "Apple" },
				//{ id: 2, name: "B", description: "Banana" },
				//{ id: 3, name: "C", description: "Cat" }
			];
			
            $scope.InitData = function () {
				//$scope.data = [
				//	{ id: 1, name: "A", description: "Apple" },
				//	{ id: 2, name: "B", description: "Banana" },
				//	{ id: 3, name: "C", description: "Cat" }
				//];
				
				$http.get("jsondata.json").then(
				function(response) {
					$scope.data = response.data.records;
				}
				, function(response){
				});
				
			};
            //    //$html.get("/Angular/GetData")
            //    //    .then(
            //    //        function (response) {
            //    //            $scope.data = [
            //    //                { id: 1, name: "A", description: "Apple" },
            //    //                { id: 2, name: "B", description: "Banana" },
            //    //                { id: 3, name: "C", description: "Cat" },
            //    //            ]
            //    //        },
            //    //        function (response) {
            //    //            alert('Error');
            //    //            }
            //    //    );
            //}
			$scope.editRecord = function(id) {
				$scope.hideform = false;
				if (id == -1) {
					$scope.record = {
						Name: "",
						City: "",
						Country: "",
						Id: -1
					};
				}
				else {
					$scope.record = {
						Name: $scope.data[id - 1].Name,
						City: $scope.data[id - 1].City,
						Country: $scope.data[id - 1].Country,
						Id: $scope.data[id - 1].Id
					};
				}
			};
			
            $scope.mySubmitForm = function () {
				
            }
        });
    </script>
</body>
</html>